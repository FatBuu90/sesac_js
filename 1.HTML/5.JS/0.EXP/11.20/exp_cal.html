<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0 auto;
            padding: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        div{
            border: 1px solid black;
            height: 70px;
        }
        .cal_container{
            display: grid;
            width: 400px;
            height: 400px;
            grid-template-rows: 1fr 4fr;
            gap: 5px;
            border: none;
        }
        .car_grid{
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            border: none;
        }
        .car_grid div{
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 25px;
            
        }
        .car_grid div:hover{
            cursor: pointer;
        }
        .car_grid div:active{
            transform: scale(0.95);
        }
        #result_area{
            text-align: right;
            font-size: 30px;
            padding-right: 10px;
            height: 80px;
        }
    </style>
</head>
<body>
    
    <div class="cal_container">
        <input id="result_area" type="text"/>
        <div class="car_grid">
            <div onclick="clickBtn('+')">+</div>
            <div onclick="clickBtn('-')">-</div>
            <div onclick="clickBtn('*')">*</div>
            <div onclick="clickBtn('/')">/</div>

            <div onclick="clickBtn('7')">7</div>
            <div onclick="clickBtn('8')">8</div>
            <div onclick="clickBtn('9')">9</div>
            <div onclick="clickBtn_result()">=</div>

            <div onclick="clickBtn('4')">4</div>
            <div onclick="clickBtn('5')">5</div>
            <div onclick="clickBtn('6')">6</div>
            <div onclick="clickBtn_Reset()">C</div>

            <div onclick="clickBtn('1')">1</div>
            <div onclick="clickBtn('2')">2</div>
            <div onclick="clickBtn('3')">3</div>
            <div onclick="clickBtn('0')">0</div>
        </div>
    </div>
    <script>
        let result_input = document.getElementById("result_area");
        let text = "";

        function clickBtn(btn){
            text = result_input.value;
            text += btn;
            result_input.value = text;
        }
        function clickBtn_Reset(){
            text = "";
            result_input.value = text;
        }
        function clickBtn_result(){
            let nums = text.split(/[+\-*/]/).map(Number);
            let tokens = text.match(/[+\-*/]/g);
            let result = nums[0];
            for(let i = 0; i < tokens.length; i++){
                if(tokens[i] == '+'){
                    result += nums[i+1];
                }else if(tokens[i] == '-'){
                    result -= nums[i+1];
                }else if(tokens[i] == '*'){
                    result *= nums[i+1];
                }else if(tokens[i] == '/'){
                    result /= nums[i+1];
                }
            }
            text = result;
            result_input.value = text;
        }

        // 공통 - 경고 메세지를 출력한다.

        // 예상되는 첫 번째 버그 
        // 연산자를 중복해서 입력했을 때, 연산자와 연산자 사이의 값이 없어 오류 발생
        // 해결방법         
        // 1. 연산자를 중복으로 누르지 못하게 막는다.
        // 2. 이미 입력된 연산자를 새 연산자로 변경한다.

        // 예상되는 두 번째 버그
        // 입력한 값을 0으로 나누었을 때 발생하는 오류
        // 해결방법
        // 1. 나누기 부호 바로 뒤에는 0 버튼을 누를 수 없게 비활성화 한다.

        // 예상되는 세 번째 버그
        // input type="text"로 열려있기 때문에 값을 키보드로 입력할 수 있다.
        // 키보드로 입력할 때 숫자나 부호가 아닌 알파벳이 입력될 수 있다.
        // 해결방법
        // 1. 값이 입력될 때 숫자와 부호를 제외한 값은 무시한다.
    </script>
</body>
</html>